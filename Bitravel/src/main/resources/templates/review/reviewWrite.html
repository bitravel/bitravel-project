<!doctype html>
<html lang="kr" xmlns:th="http://www.thymeleaf.org">

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="/assets/img/favicon.ico" type="image/ico">
        <!--Icons-->
        <link href="/assets/fonts/iconsmind/iconsmind.css" rel="stylesheet">
        <link href="/assets/fonts/bootstrap-icons/bootstrap-icons.css" rel="stylesheet"><!--Google fonts-->        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Poppins:wght@200;300;400;500;600;700&display=swap"
            rel="stylesheet">
        <!--Flatpickr-->
        <link rel="stylesheet" href="/assets/vendor/flatpickr/flatpickr.min.css">
        <!-- include libraries(jQuery, bootstrap) -->
		<link
			href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css"
			rel="stylesheet">
		<script
			src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
		<script
			src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
        <!-- include summernote css/js-->
		<link href="/css/summernote-lite.css" rel="stylesheet">
		<script src="/js/summernote-lite.js"></script>
		<script src="/js/summernote-ko-KR.js"></script>
        
        <!--File uploader-->
        <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet" />
        <link href="https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.css" rel="stylesheet">
        <link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css" rel="stylesheet">
        <!-- Main CSS -->
        <link href="/assets/css/theme.min.css" rel="stylesheet">
        <link rel="stylesheet" th:href="@{/css/style.css}" />
        <!--모달-->
        <style> .note-dialog .modal-dialog{ z-index:1050; } .modal-nav </style>
		
		
        
		
        <title>여행후기 작성 페이지</title>
    </head>

    <body>
        <!--Preloader Spinner-->
        <!-- <div class="spinner-loader bg-gradient-secondary text-white">
            <div class="spinner-border text-primary" role="status">
            </div>
            <span class="small d-block ms-2">Loading...</span>
        </div> -->
        <!--Header Start-->
        <header class="z-index-fixed">
            <nav class="navbar navbar-expand-lg navbar-light bg-white">
			<div class="container position-relative">
				<a class="navbar-brand" href="index.html"> <img
					src="/assets/img/logo/logo.svg" alt="" class="img-fluid">
				</a>

				<div
					class="d-flex align-items-center navbar-no-collapse-items order-lg-last">
					<button class="navbar-toggler order-last" type="button"
						data-bs-toggle="collapse" data-bs-target="#mainNavbarTheme"
						aria-controls="mainNavbarTheme" aria-expanded="false"
						aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"> <i></i>
						</span>
					</button>
					<div class="nav-item me-3 me-lg-0 dropdown">
						<a href="#" class="btn btn-secondary rounded-pill py-0 ps-0 pe-3"
							data-bs-auto-close="outside" data-bs-toggle="dropdown"> <img
							src="/assets/img/avatar/4.jpg" alt=""
							class="avatar sm rounded-circle me-1"> <small>Emily</small>
						</a>
						<div class="dropdown-menu dropdown-menu-end dropdown-menu-xs p-0">
							<a href="#" class="dropdown-header border-bottom p-4">
								<div class="d-flex align-items-center">
									<div>
										<img src="/assets/img/avatar/4.jpg" alt=""
											class="avatar xl rounded-pill me-3">
									</div>
									<div>
										<h5 class="mb-0">Emily doe</h5>
										<span class="text-muted d-block mb-2">emily@domain.com</span>
										<div
											class="small d-inline-block link-underline fw-semibold text-muted">View
											account</div>
									</div>
								</div>
							</a> <a href="#" class="dropdown-item p-3"> <span
								class="d-block text-end"> <svg
										xmlns="http://www.w3.org/2000/svg" width="20" height="20"
										fill="currentColor" class="bi bi-box-arrow-right me-2"
										viewBox="0 0 16 16">
                                            <path fill-rule="evenodd"
											d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z">
                                            </path>
                                            <path fill-rule="evenodd"
											d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z">
                                            </path>
                                        </svg> Sign Out
							</span>
							</a>
						</div>
					</div>
				</div>
				<div class="collapse navbar-collapse" id="mainNavbarTheme">
					<ul class="navbar-nav mx-auto">
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" href="/board/list" role="button">여행지
						</a></li>
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" href="/review/list"
							role="button">여행후기 </a></li>
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" href="/board/list" role="button">게시판
						</a></li>
					</ul>
				</div>
			</div>
		</nav>
            <!-- 헤더 검색창 시작 -->
            <div class="row ">
                <div class="col-xl-6 col-sm-8 col-auto mx-auto d-flex">
                    <label for="formGroupExampleInput" class="form-label"></label>
                    <input type="text" class="form-control" id="formGroupExampleInput" placeholder="여행지를 검색하세요.">
                    <button type="submit" class="ms-sm-1 rounded-pill btn btn-primary btn-lg ">
                        <span class="d-flex align-items-center">
                            <i class="far fa-paper-plane me-2 small d-inline-block"></i>
                            <span>검색</span>
                        </span>
                    </button>
                </div>
            </div>
            <!-- 헤더 검색창 종료 -->
        </header>
        <!--Main content-->
        <main class="main-content position-relative z-index-2 bg-white" id="main-content">
            <section class="position-relative bg-light">
                <div class="container  pt-11 pb-7 pb-lg-9">
                    <div class="row pt-lg-5">
                        <div class="col-lg-8">
                            <h2 class="display-4">여행후기 작성</h2>
                            <p>Layout footer fixed at bottom using pure javascript code </p>
                        </div>
                    </div>
                </div>

            </section>
            
			<!-- 모달 내부 내용 -->
            <div class="modal" id="myModal_1">
				<div class="modal-dialog modal-fullscreen">
					<div class="modal-content note-dialog modal-dialog">
		
						<!-- Modal Header -->
						<div class="modal-header">
							<h4 class="modal-title">여행지 조회</h4>
							<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
						</div>
						<!--Modal navbar-->
						<div class="modal-nav">
		
						</div>
						<!-- Modal body -->
						<div class="modal-body">
		
							<div class="btn-group">
								<div class="btn-group">
									<button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">여행지명</button>
								</div>
		
								<div>
									<form class="d-flex" >
										<input class="form-control me-2" type="text" id="name" onkeypress="findTravelName()" placeholder="Search" >
										<input type="text" style="width:0px; visibility: hidden;">
										<button class="btn btn-primary" type="button" onclick="findTravelName();">Search</button>
										<button class="btn btn-primary" type="button" onclick="addTravel();">추가하기</button>
									</form>
								</div>
							</div>
							<!--테이블-->
							<table class="table table-striped">
								<thead>
									<tr>
										<th>선택</th>
										<th>번호</th>
										<th>여행지</th>
										<th>주소</th>
										<th>id</th>
									</tr>
								</thead>
								<tbody id="list">
		
								</tbody>
							</table>
						</div>
		
						<!-- Modal footer -->
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
						</div>
		
					</div>
				</div>
			</div>
			
            <!-- 글작성 창 시작-->
            <section class="position-relative">
                <div class="container py-2 py-1 mb-9">
                    <div class="row mb-7 mb-15 justify-content-center">
												<!-- 모달 버튼 -->
			            <div class="container mt-3">
							<hr>
							<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal_1">
								여행지 추가
							</button>
						</div>
                        <form id="form" class="form-horizontal" name="only-form">

						<div class="form-group" name="form-line">
							<label for="reviewTitle" class="col-sm-2 control-label">여행지명</label>
							<div class="col-sm-10">
								<input type="hidden" id="travelId" class="form-control"	placeholder="여행지 Id" />
								<input type="text" id="travelName" class="form-control"
									placeholder="여행지를 입력해 주세요." readonly/>
							</div>
						</div>

						<div class="form-group">
							<label for="reviewTitle" class="col-sm-2 control-label">제목</label>
							<div class="col-sm-10">
								<input type="text" id="reviewTitle" class="form-control"
									placeholder="제목을 입력해 주세요." />
							</div>
						</div>

						<div class="form-group">
							<label for="reviewContent" class="col-sm-2 control-label">내용</label>
							<div class="col-sm-10">
								<textarea id="summernote" name="editordata"></textarea>
							</div>
						</div>

						<div class="btn_wrap text-center">
							<button type="button" onclick="goBack();"
								class="btn btn-default waves-effect waves-light">뒤로가기</button>
							<button type="button" onclick="save();"
								class="btn btn-primary waves-effect waves-light">저장하기</button>
						</div>
						</form>
                    </div>
                </div>
            </section>
        </main>
        <!-- 글작성 창 종료 -->

        <!--Footer Start-->
        <footer id="footer-default" class="bg-dark text-white position-relative">
            <div class="container py-7 py-lg-9 position-relative z-index-1">
                <div class="row">

                    <!--Footer col-->
                    <div class="col-md-9 col-lg-3 mb-5 mb-lg-0">
                        <div class="d-flex flex-column h-100 justify-content-between">
                            <a href="#" class="width-90 mb-4 mb-lg-0 d-block">
                                <img src="/assets/img/logo/logo-white.svg" alt="" class="img-fluid">
                            </a>
                            <div class="mt-auto">
                                <ul class="list-inline mb-0">
                                    <li class="list-inline-item">
                                        <a href="#">
                                            <svg fill="currentColor" width="24" height="24"
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                <path
                                                    d="M426.8 64H85.2C73.5 64 64 73.5 64 85.2v341.6c0 11.7 9.5 21.2 21.2 21.2H256V296h-45.9v-56H256v-41.4c0-49.6 34.4-76.6 78.7-76.6 21.2 0 44 1.6 49.3 2.3v51.8h-35.3c-24.1 0-28.7 11.4-28.7 28.2V240h57.4l-7.5 56H320v152h106.8c11.7 0 21.2-9.5 21.2-21.2V85.2c0-11.7-9.5-21.2-21.2-21.2z">
                                                </path>
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="list-inline-item ms-2">
                                        <a href="#">
                                            <svg fill="currentColor" width="24" height="24"
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                <path xmlns="http://www.w3.org/2000/svg"
                                                    d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6-18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6.8 15 2.5 22.1-80.5-4-151.9-42.6-199.6-101.3-8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7-16-.4-31-4.8-44-12.1v1.2c0 47 33.4 86.1 77.7 95-8.1 2.2-16.7 3.4-25.5 3.4-6.2 0-12.3-.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3-33.1 26-74.9 41.5-120.3 41.5-7.8 0-15.5-.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-.1-8.4-.3-12.5C462.6 146 479 129 492 109.5z">
                                                </path>
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="list-inline-item ms-2">
                                        <a href="#">
                                            <svg fill="currentColor" width="24" height="24"
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                <path
                                                    d="M336 96c21.2 0 41.3 8.4 56.5 23.5S416 154.8 416 176v160c0 21.2-8.4 41.3-23.5 56.5S357.2 416 336 416H176c-21.2 0-41.3-8.4-56.5-23.5S96 357.2 96 336V176c0-21.2 8.4-41.3 23.5-56.5S154.8 96 176 96h160m0-32H176c-61.6 0-112 50.4-112 112v160c0 61.6 50.4 112 112 112h160c61.6 0 112-50.4 112-112V176c0-61.6-50.4-112-112-112z">
                                                </path>
                                                <path
                                                    d="M360 176c-13.3 0-24-10.7-24-24s10.7-24 24-24c13.2 0 24 10.7 24 24s-10.8 24-24 24zM256 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64m0-32c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96z">
                                                </path>
                                            </svg>
                                        </a>
                                    </li>
                                    <li class="list-inline-item ms-2">
                                        <a href="#">
                                            <svg width="24" height="24" fill="currentColor" viewBox="0 0 512 512">
                                                <path
                                                    d="M344.1 233.6c-28.9 0-32.9 28.8-32.9 28.8h61.4s.4-28.8-28.5-28.8zM204.8 262.4h-54.4v50h51.7c7.8-.2 22.4-2.4 22.4-24.3 0-26-19.7-25.7-19.7-25.7z">
                                                </path>
                                                <path
                                                    d="M256 32C132.3 32 32 132.3 32 256s100.3 224 224 224 224-100.3 224-224S379.7 32 256 32zm47.2 137.6h77.1v23h-77.1v-23zm-39 120.8c0 57-59.4 55.2-59.4 55.2h-97.2v-187h97.2c29.6 0 52.9 16.3 52.9 49.8S229.2 244 229.2 244c37.6 0 35 46.4 35 46.4zm144.2-3.1h-96.9c0 34.7 32.9 32.5 32.9 32.5 31.1 0 30-20.1 30-20.1h32.9c0 53.4-64 49.7-64 49.7-76.7 0-71.8-71.5-71.8-71.5s-.1-71.8 71.8-71.8c75.7.1 65.1 81.2 65.1 81.2z">
                                                </path>
                                                <path
                                                    d="M218 211.3c0-19.4-13.2-19.4-13.2-19.4h-54.4v41.7h51c8.8 0 16.6-2.9 16.6-22.3z">
                                                </path>
                                            </svg>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!--Footer col-->
                    <div class="col-lg-3 col-xl-2 col-md-4 col-sm-6 ms-lg-auto mb-5 mb-md-0">
                        <h5 class="mb-4">Services</h5>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Design
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Development
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    E-commerce
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Mobile app
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Help center
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!--Footer col-->
                    <div class="col-lg-3 col-xl-2 col-md-4 col-sm-6 ms-lg-auto mb-5 mb-md-0">
                        <h5 class="mb-4">About</h5>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Company
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Our blog
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Contact us
                                </a>
                            </li>

                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Career
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Customers
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!--Footer col-->
                    <div class="col-md-4 col-sm-8 col-lg-3">
                        <div class="d-flex flex-column justify-content-md-between h-100">
                            <div class="text-muted">
                                <p class="mb-2">
                                    <strong>Company, Inc.</strong>
                                </p>
                                <p class="mb-3">
                                    1355 Market St, Suite 900<br> San Francisco<br> CA 94103
                                </p>
                            </div>

                            <div class="mt-auto mb-0">
                                <a href="mailto:mail@domain.com">
                                    <strong>support@domain.com</strong>
                                </a>
                                <hr class="my-3">
                                <a href="tel:+011234567890">
                                    <strong>+01 123 456 7890</strong>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="d-sm-flex flex-sm-row justify-content-center justify-content-sm-between">
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <a href="#" class="text-muted small">
                                Privacy policy
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#" class="text-muted small">
                                Terms & conditions
                            </a>
                        </li>
                    </ul>

                    <small class="text-sm-end text-muted">
                        © Copyright. All Right Reserved.<br> Made by Creative DM
                    </small>
                </div>
            </div>
            <!--container-->
        </footer>

        <!-- begin Back to Top button -->
        <a href="#" class="toTop">
            <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13 9' class="align-middle rotate-180" width="13"
                height="9">
                <path fill='currentColor'
                    d="M12.25 2.30062L10.8988 0.949371L6.5 5.33854L2.10125 0.949371L0.75 2.30062L6.5 8.05062L12.25 2.30062Z">
                </path>
            </svg>
        </a>


        <!-- 글작성 scripts -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
		<script th:src="@{/plugin/bootstrap/js/bootstrap.min.js}"></script>
    </body>
    <script th:inline="javascript">
	/*<![CDATA[*/
		/**
		* 모달창 앞으로 이동
		**/

		$('#myModal_1').appendTo("body") 
		
		/**
		* 썸머노트 에디터
		**/
		
		$(document).ready(function() {
			 $('#summernote').summernote({
		    		placeholder: '내용을 입력하세요. (10자 이상)',
		    		minHeight: 370,
		    		maxHeight: null,
		    		focus: true,
		    		lang: 'ko-KR',
	    			callbacks : { //다중 이미지 처리 반복문..
						onImageUpload : function(files, editor, welEditable) {
							for (var i = 0; i < files.length; i++) {
								sendFile(files[i], this);
							}
						}
					}
		    	});
			 console.log("인식여부");
	         findreview();
		});
	
		function sendFile(file, el) {
			var form_data = new FormData();
			form_data.append('file', file);
			$.ajax({
				data : form_data,
				type : "POST",
				url : '/image',
				cache : false,
				contentType : false,
				enctype : 'multipart/form-data',
				processData : false,
				success : function(url) {
					$(el).summernote('insertImage', url, function($image) {
						$image.css('width', "50%");
						console.log(url);
					});
				}
			});
		}
			
		/**
		* 여행지 이름으로 리스트 조회
		**/
		 
		 function findTravelName() {
			
			let input = document.getElementById('name');
			var url = '/api/travels/name/' + input.value;
			
			fetch(url).then(response => {
				if (!response.ok) {
					console.log("Request failed...");
					throw new Error('Request failed...');
				}
				return response.json();
				console.log("good")
			}).then(json => {
				let html = '';

				if (!json.length) {
					html = '<td colspan="4">등록된 여행지가 없습니다.</td>';
				} else {
					json.forEach((obj, idx) => {
						html += `
							<tr>
								<td>
								<input class="form-check-input" name="travel-check" type="checkbox" value="${obj.travelId}" id="${obj.travelId}"></td>
    							<td>${json.length - idx}</td>
    							<td class="text-left">
    								<a href="javascript: void(0);" onclick="put('${obj.travelId}','${obj.travelName}'); addTravel();">${obj.travelName}</a>
    							</td>
    							<td>${obj.address}</td>
    							<td>${obj.travelId}</td>
							</tr>
						`;
					});
				}

				document.getElementById('list').innerHTML = html;
			});
		}
		
		/**
	        * 유효성 검사
	        */
	       function isValid() {
	       
	         	const form = document.getElementById('form');
	       
	       	if (!form.reviewTitle.value.trim()) {
	       		alert('제목을 입력해 주세요.');
	       		form.reviewTitle.value = '';
	       		form.reviewTitle.focus();
	       		return false;
	       	}
	       
	       
	       	if (!form.summernote.value.trim()) {
	       		alert('내용을 입력해 주세요.');
	       		form.summernote.value = '';
	       		form.summernote.focus();
	       		return false;
	       	}
	       
	       	return true;
	       }
		
		/**
         * 게시글 등록(생성/수정)
         */
        function save() {
        
        	if ( !isValid() ) {
        		return false;
        	}
        	
        	const form = document.getElementById('form');
        	var travelArray = [];
        	travelArray.push(form.travelId.value);
        	travelArray.push(form.travelId1.value);
        	travelArray.push(form.travelId2.value);
        	const rimage = form.summernote.value;
        	const thumbNail = rimage.match("<img[^>]*src=[\"']?([^>\"']+)[\"']?[^>]*>");
        	console.log(thumbNail[1]);
        	const params = {
        		
        		//travelName: form.travelName.value,
        		reviewTitle: form.reviewTitle.value,
        		reviewContent: form.summernote.value,
        		travelId : travelArray,
        		thumbNail : thumbNail[1]
        	};
        	console.log(params);
        	
        	const id = /*[[ ${id} ]]*/;
        	const uri = ( id ) ? `/api/reviews/${id}` : '/api/reviews';
        	const method = ( id ) ? 'PATCH' : 'POST';
        	
        	fetch(uri, {
        		method: method, /*데이터 생성은 무조건 post 방식 이용*/
        		headers: {'Content-Type': 'application/json'}, /*API 호출 시, GET 방식이 아닌 요청은 Content-Type을 application/json으로 설정한다. */
        		body: JSON.stringify(
        				params) /*데이터 전달에 사용되는 옵션으로, params 객체에 담긴 게시글 정보를 API 서버로 전달한다.*/
        
        	}).then(response => {
        		if (!response.ok) {
        			throw new Error('Request failed...');
        		}
        		if (!id) {
        			alert('저장되었습니다.');
        			location.href = '/review/list';
        		} else {
        			alert('저장되었습니다.');
					location.href = '/review/detail/'+id;
        		}
        		
        	}).catch(error => {
        		alert('오류가 발생하였습니다.');
        	});
        }
		
		/**
		 * 리뷰글 상세 조회
		 */
		function findreview() {

		    const id = /*[[ ${id} ]]*/;

		    if ( !id ) {
		    	return false;
		    }
		    fetch(`/api/reviews/${id}`).then(response => {
		    	if (!response.ok) {
					throw new Error('Request failed...');
			    }
		    	console.log("id: "+id);
		    	return response.json();

		   	}).then(json => {
		   		console.table(json);
		   		const form = document.getElementById('form');
		   		form.reviewTitle.value = json.reviewTitle;
		   		$('#summernote').summernote('code', json.reviewContent); // summernote html코드로 받으려면 'code'사용!
		   		

		   	}).catch(error => {
		    	alert('게시글 정보를 찾을 수 없습니다.');
		    	location.href = '/review/list';
		   	});
		}
		
		/**
		* 뒤로가기 
		**/
		
		function goBack() {
			
			const id = /*[[ ${id} ]]*/;
			
			if(!id)
				location.href = '/review/list';
			else
				location.href = '/review/detail/'+id;
			
		}
		/**
         * 여행지 삽입
         **/
		function put(travelId, travelName) {
        	var travelId = travelId;
        	var travelName = travelName;
        	var allSelect = (document.getElementsByName('form-line').length);
        	//var travelId = 'travelId' + allSelect;
        	//var travelName = 'travelName' + allSelect;
        	//모달창 닫기
        	if (allSelect == 1){
        		$("#myModal_1").modal("hide");
        		$("#travelId").val(travelId);
            	$("#travelName").val(travelName);
        	}else if(allSelect == 2){
        		$("#myModal_1").modal("hide");
        		$("#travelId1").val(travelId);
            	$("#travelName1").val(travelName);
        	}else {
        		$("#myModal_1").modal("hide");
        		$("#travelId2").val(travelId);
            	$("#travelName2").val(travelName);
       		}	
        }
		/**
		*
		
		function addTravel() {
			var allInput = document.getElementsByName('travel-check');
			var checkList = new Array();
			for (var i = 0; i < allInput.length; i++) {
				if (allInput[i].checked)
					checkList.push(allInput[i].value);
			}
			$("#myModal_1").modal("hide");
			$(".notice-list").val(checkList);
			$("#travelId").val(checkList);
		}
 		**/
 		// 여행지 하나 추가하기
 		function addTravel() {
 			var allSelect = (document.getElementsByName('form-line').length);

 			if (allSelect == 3) {
 				alert('최대 3곳까지 등록할 수 있습니다.');
 				return false;
 			}

 			var travelId = 'travelId' + allSelect;
 			var travelName = 'travelName' + allSelect;
 			tag = "<label for='reviewTitle' name='line' class='col-sm-2 control-label'>여행지명</label>\n";
 			tag += "<div class='col-sm-10'>\n<input type='hidden' id='travelId" + allSelect + "'class='form-control'placeholder='여행지 Id'/>";
 			tag += "<input type='text' id='travelName" + allSelect + "' class='form-control' placeholder='여행지를 선택해 주세요.' readonly/>\n </div>"
 			var parent = document.getElementsByName('only-form')[0];
 			var newElement = document.createElement('parent');
 			var firstChild = parent.firstChild;
 			newElement.setAttribute('class', 'form-group');
 			newElement.setAttribute('name', 'form-line')
 			newElement.innerHTML = tag;
 			parent.insertBefore(newElement, firstChild);
 		}
 		
 		
	/*]]>*/
    </script>
</html>
